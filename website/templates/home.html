{% extends "base.html" %}
{% block content %}
<h1 class="mb-4">DraftKings Projections</h1>

<div class="mb-3 d-flex align-items-center">
    <form method="get" class="me-3">
        <div class="input-group">
            <label class="input-group-text" for="filter">Filter:</label>
            <select class="form-select" name="filter" id="filter" onchange="this.form.submit()">
                <option value="all" {% if request.args.get('filter','all') == 'all' %}selected{% endif %}>All</option>
                {% for p in positions %}
                <option value="{{ p }}" {% if request.args.get('filter') == p %}selected{% endif %}>{{ p }}</option>
                {% endfor %}
            </select>
        </div>
    </form>

    <a class="btn btn-outline-warning" href="{{ url_for('download_csv') }}">Download CSV</a>
</div>

<table id="dataTable" class="table table-striped table-hover">
    <thead>
        <tr>
            {% for col in columns %}
            <th>{{ col }}</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for row in data %}
        <tr>
            {% for col in columns %}
            <td>{{ row[col] }}</td>
            {% endfor %}
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
